<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù…Ù„ÙØ§Øª</title>

<style>
* {
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
}

body {
  margin: 0;
  padding: 30px;
  background: #f6f6f6;
}

h1 {
  text-align: center;
  margin-bottom: 30px;
}

.files {
  max-width: 900px;
  margin: auto;
}

.file {
  background: #fff;
  padding: 16px 20px;
  margin-bottom: 12px;
  border-radius: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.file button {
  background: #000;
  color: #fff;
  padding: 7px 16px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
}

.file button:hover {
  opacity: .85;
}

/* Ø¹Ø§Ø±Ø¶ PDF */
#viewer {
  margin-top: 30px;
  background: #fff;
  padding: 15px;
  border-radius: 10px;
  display: none;
}

canvas {
  width: 100%;
  margin-bottom: 20px;
}
</style>
</head>

<body>

<h1>ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª</h1>

<div class="files" id="files">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</div>

<div id="viewer"></div>

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<script>
const owner  = "a7medalnahdi";
const repo   = "pdfs";
const branch = "main";
const folder = "files";

const apiURL = `https://api.github.com/repos/${owner}/${repo}/contents/${folder}`;

fetch(apiURL)
  .then(r => r.json())
  .then(files => {
    const list = document.getElementById("files");
    list.innerHTML = "";

    files.forEach(file => {
      if (file.name.toLowerCase().endsWith(".pdf")) {
        const pdfURL =
          `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${folder}/${encodeURIComponent(file.name)}`;

        list.innerHTML += `
          <div class="file">
            <span>ğŸ“„ ${file.name}</span>
            <button onclick="openPDF('${pdfURL}')">Ø§Ø³ØªØ¹Ø±Ø§Ø¶</button>
          </div>
        `;
      }
    });
  });

function openPDF(url) {
  const viewer = document.getElementById("viewer");
  viewer.innerHTML = "";
  viewer.style.display = "block";

  pdfjsLib.getDocument(url).promise.then(pdf => {
    for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
      pdf.getPage(pageNum).then(page => {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");

        const viewport = page.getViewport({ scale: 1.5 });
        canvas.height = viewport.height;
        canvas.width = viewport.width;

        viewer.appendChild(canvas);

        page.render({
          canvasContext: ctx,
          viewport: viewport
        });
      });
    }
  });
}
</script>

</body>
</html>
